<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crema Pratas</title>
    <!-- Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <!-- Seu CSS -->
    <style>
        /* --- Reset Básico e Estilos Globais --- */
        :root {
            --cor-primaria: #dfdfdf; /* Cinza claro */
            --cor-fundo: #111111;
            --cor-fundo-secundario: #1a1a1a;
            --cor-fundo-modal: #222222;
            --cor-texto-principal: #f0f0f0;
            --cor-texto-secundario: #a0a0a0;
            --cor-sucesso: #25D366;
            --cor-sucesso-hover: #128C7E;
            --cor-erro: #f44336;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto-principal);
        }
        a { color: inherit; text-decoration: none; }
        .container {
            width: 100%;
            max-width: 1280px;
            margin-left: auto;
            margin-right: auto;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        /* --- Cabeçalho --- */
        .site-header {
            background-color: rgba(17, 17, 17, 0.8);
            backdrop-filter: blur(4px);
            position: sticky;
            top: 0;
            z-index: 40;
            padding: 1rem 60px;
        }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { height: 40px; object-fit: contain; }
        .main-nav { display: none; }
        .main-nav a { padding: 0.5rem 1rem; transition: color 0.3s ease; }
        .main-nav a:hover { color: var(--cor-texto-secundario); }
        .header-icons { display: flex; align-items: center; gap: 1rem; }
        .icon-btn {
            background: none; border: none; color: var(--cor-texto-principal);
            font-size: 1.25rem; cursor: pointer; position: relative;
            transition: color 0.3s ease, transform 0.3s ease;
        }
        .icon-btn:hover { color: var(--cor-primaria); transform: scale(1.1); }
        .icon-count {
            position: absolute; top: -0.5rem; right: -0.5rem;
            background-color: var(--cor-primaria); color: var(--cor-fundo);
            font-size: 0.75rem; font-weight: bold; height: 1.25rem; width: 1.25rem;
            border-radius: 9999px; display: flex; align-items: center; justify-content: center;
        }
        .hidden { display: none !important; }
        /* --- Swiper --- */
        .swiper { width: 100%; height: 100%; padding: 10px 0; }
        .swiper-slide {
            text-align: center; font-size: 18px; background: transparent;
            display: flex; justify-content: center; align-items: center; height: auto;
        }
        .swiper-slide img { display: block; width: 100%; max-height: 400px; object-fit: cover; }
        .swiper-pagination-bullet { background-color: #a0a0a0; }
        .swiper-pagination-bullet-active { background-color: #dfdfdf; }
        .product-swiper { position: relative; }
        .product-swiper .swiper-button-next, .product-swiper .swiper-button-prev {
            color: var(--cor-texto-principal); background-color: rgba(0, 0, 0, 0.5);
            width: 44px; height: 44px; border-radius: 50%; transition: background-color 0.3s ease;
        }
        .product-swiper .swiper-button-next:hover, .product-swiper .swiper-button-prev:hover { background-color: rgba(0, 0, 0, 0.8); }
        .product-swiper .swiper-button-next::after, .product-swiper .swiper-button-prev::after { font-size: 1.2rem; font-weight: bold; }
        /* --- Seções --- */
        .benefits-section { padding: 3rem 0; background-color: rgba(26, 26, 26, 0.5); }
        .benefits-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; text-align: center; }
        .benefit-item i { font-size: 2rem; margin-bottom: 0.5rem; color: var(--cor-primaria); }
        .benefit-item h3 { font-weight: 700; }
        .benefit-item p { font-size: 0.875rem; color: var(--cor-texto-secundario); }
        .divisor-de-secao { display: flex; flex-direction: column; text-align: center; margin-bottom: 2.5rem; }
        .products-section { padding: 4rem 0; }
        .section-title { font-size: 1.875rem; font-weight: 700; text-align: center; }
        .section-subtitle { color: var(--cor-texto-secundario); font-size: 1.275rem; }
        .mais-produtos {
            justify-content: center; display: flex; align-items: center; text-align: center;
            margin: 2rem auto; border: 1px solid var(--cor-primaria); border-radius: 55px;
            width: 200px; height: 50px; transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;
        }
        .mais-produtos:hover { transform: translateY(-5px); }
        /* --- Card de Produto --- */
        .product-card {
            background-color: var(--cor-fundo-secundario); border: 1px solid #2a2a2a;
            border-radius: 0.5rem; overflow: hidden; display: flex; flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 100%; height: 100%; min-height: 500px; max-height: 500px;
        }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(255, 255, 255, 0.05); }
        .product-image-wrapper { position: relative; }
        .product-image { width: 100%; height: 16rem; object-fit: cover; }
        .favorite-btn { position: absolute; top: 0.75rem; right: 0.75rem; }
        .favorite-btn.active { color: var(--cor-primaria); }
        .product-info { padding: 1rem; display: flex; flex-direction: column; flex-grow: 1; }
        .product-info h3 { font-size: 1.125rem; font-weight: 700; flex-grow: 1; }
        .product-rating { display: flex; align-items: center; margin: 0.5rem 0; }
        .product-rating .stars { color: var(--cor-primaria); }
        .product-rating .reviews { font-size: 0.75rem; color: var(--cor-texto-secundario); margin-left: 0.5rem; }
        .product-pricing { margin: 0.5rem 0; }
        .product-pricing .old-price { color: #6b7280; text-decoration: line-through; }
        .product-pricing .current-price { font-size: 1.25rem; font-weight: 700; margin-left: 0.5rem; }
        .add-to-cart-btn {
            margin-top: 1rem; width: 100%; background-color: var(--cor-primaria); color: var(--cor-fundo);
            font-weight: 700; padding: 0.75rem; border-radius: 0.5rem; border: none; cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .add-to-cart-btn:hover { background-color: #b0b0b0; }
        /* --- Modal --- */
        .modal {
            position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.7);
            display: flex; align-items: center; justify-content: center; z-index: 50;
            opacity: 0; transition: opacity 0.3s ease; pointer-events: none;
        }
        .modal.visible { opacity: 1; pointer-events: auto; }
        .modal-content {
            background-color: var(--cor-fundo-modal); border-radius: 0.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5); width: 91.666667%; padding: 1.5rem;
            transform: scale(0.95); transition: transform 0.3s ease; max-height: 80vh;
            display: flex; flex-direction: column;
        }
        .modal.visible .modal-content { transform: scale(1); }
        .modal-header {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #4b5563; padding-bottom: 0.75rem; margin-bottom: 1rem;
        }
        .modal-header h2 { font-size: 1.5rem; font-weight: 700; }
        .close-modal-btn {
            background: none; border: none; color: var(--cor-texto-secundario);
            font-size: 1.875rem; cursor: pointer; line-height: 1;
        }
        .modal-body { margin-bottom: 1.5rem; overflow-y: auto; }
        .cart-item, .favorite-item { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; }
        .item-details { display: flex; align-items: center; flex-grow: 1; min-width: 0; }
        .item-details img { width: 4rem; height: 4rem; object-fit: cover; border-radius: 0.375rem; margin-right: 1rem; }
        .item-info { min-width: 0; }
        .item-info h4 { font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .item-info p { color: var(--cor-primaria); font-weight: 600; }
        .item-actions { display: flex; align-items: center; }
        .quantity-control { display: flex; align-items: center; border: 1px solid #4b5563; border-radius: 0.375rem; }
        .quantity-control button { background: none; border: none; color: var(--cor-texto-principal); padding: 0.25rem 0.75rem; cursor: pointer; }
        .remove-btn { background: none; border: none; color: #ef4444; margin-left: 1.5rem; font-size: 1.25rem; cursor: pointer; }
        .whatsapp-btn {
            width: 100%; background-color: var(--cor-sucesso); color: white;
            font-weight: 700; padding: 0.75rem; border-radius: 0.5rem; border: none;
            display: flex; align-items: center; justify-content: center; font-size: 1.125rem;
            cursor: pointer; transition: background-color 0.3s ease;
        }
        .whatsapp-btn:hover { background-color: var(--cor-sucesso-hover); }
        .whatsapp-btn i { margin-right: 0.75rem; font-size: 1.5rem; }
        /* --- Media Queries --- */
        @media (min-width: 768px) {
            .main-nav { display: flex; gap: 1.5rem; }
            .benefits-grid { grid-template-columns: repeat(4, 1fr); }
            .modal-content { width: 66.666667%; }
        }
        @media (min-width: 1024px) {
            .modal-content { width: 50%; }
        }
    </style>
</head>
<body>

    <!-- Cabeçalho -->
    <header class="site-header">
        <div class="container header-content">
            <!-- Imagem da logo substituída por um placeholder -->
            <img class="logo" src="https://placehold.co/200x60/111111/FFFFFF?text=Crema+Pratas" alt="Logo Crema Pratas">
            <nav class="main-nav">
                <a href="#">Início</a>
                <a href="#produtos">Nossos Produtos</a>
            </nav>
            <div class="header-icons">
                <button id="favorites-btn" class="icon-btn">
                    <i class="fa-solid fa-heart"></i>
                    <span id="favorites-count" class="icon-count hidden">0</span>
                </button>
                <button id="cart-btn" class="icon-btn">
                    <i class="fa-solid fa-shopping-cart"></i>
                    <span id="cart-count" class="icon-count hidden">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Carrossel Swiper -->
    <div class="swiper mySwiper">
        <div class="swiper-wrapper">
            <!-- Imagens do banner substituídas por placeholders -->
            <div class="swiper-slide"><img src="https://placehold.co/1200x400/111111/FFFFFF?text=Banner+1" alt="Banner 1"></div>
            <div class="swiper-slide"><img src="https://placehold.co/1200x400/222222/FFFFFF?text=Banner+2" alt="Banner 2"></div>
        </div>
        <div class="swiper-pagination"></div>
    </div>

    <!-- Seção de Benefícios -->
    <section class="benefits-section">
        <div class="container">
            <div class="benefits-grid">
                <div class="benefit-item"><i class="fa-solid fa-credit-card"></i><h3>5X SEM JUROS</h3><p>Parcelamento facilitado</p></div>
                <div class="benefit-item"><i class="fa-solid fa-truck-fast"></i><h3>FRETE GRÁTIS</h3><p>Acima de R$300</p></div>
                <div class="benefit-item"><i class="fa-solid fa-gem"></i><h3>GARANTIA ETERNA</h3><p>Referente ao teor da Joia</p></div>
                <div class="benefit-item"><i class="fa-solid fa-gift"></i><h3>BRINDE EXCLUSIVO</h3><p>Para sua joia brilhar</p></div>
            </div>
        </div>
    </section>

    <!-- Seção de Produtos -->
    <main id="produtos" class="products-section container">
        <div class="divisor-de-secao">
            <h2 class="section-title">OS MAIS VENDIDOS</h2>
            <p class="section-subtitle">Fique por dentro das mais desejadas!</p>
        </div>
        <div class="swiper product-swiper">
            <div id="product-list" class="swiper-wrapper">
                <!-- Produtos do Firebase serão inseridos aqui -->
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
        <div class="mais-produtos"><a>Ver mais produtos</a></div>
    </main>
        
    <!-- Rodapé -->
    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 Lumen Desenvolvimento. Todos os direitos reservados.</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-whatsapp"></i></a>
            </div>
        </div>
    </footer>

    <!-- Modal do Carrinho -->
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <header class="modal-header">
                <h2>Meu Carrinho</h2>
                <button id="close-modal-btn" class="close-modal-btn">&times;</button>
            </header>
            <div id="cart-items" class="modal-body"></div>
            <footer class="modal-footer">
                <div class="total-section">
                    <span>Total:</span>
                    <span id="cart-total">R$ 0,00</span>
                </div>
                <button id="checkout-btn" class="whatsapp-btn"><i class="fab fa-whatsapp"></i> Finalizar Compra</button>
            </footer>
        </div>
    </div>
    
    <!-- Modal de Favoritos -->
    <div id="favorites-modal" class="modal">
        <div class="modal-content">
            <header class="modal-header">
                <h2>Meus Favoritos</h2>
                <button id="close-favorites-modal-btn" class="close-modal-btn">&times;</button>
            </header>
            <div id="favorite-items" class="modal-body"></div>
        </div>
    </div>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    
    <!-- Firebase e Lógica do Site -->
    <script type="module">
        // Importar funções do Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

        // Sua configuração do Firebase (já preenchida com os dados do seu arquivo)
        const firebaseConfig = {
            apiKey: "AIzaSyAOJYhteeQkDf90pNc-Q26TWC4dpRcWGnw",
            authDomain: "cremapratas-e70b9.firebaseapp.com",
            projectId: "cremapratas-e70b9",
            storageBucket: "cremapratas-e70b9.appspot.com",
            messagingSenderId: "601950880055",
            appId: "1:601950880055:web:9660320d933ec2468adab2",
            measurementId: "G-V31HKENBBY"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- LÓGICA DO SITE ---
        
        // Variáveis globais
        let allProducts = [];
        let cart = [];
        let favorites = [];

        // Elementos do DOM
        const productList = document.getElementById('product-list');
        const cartBtn = document.getElementById('cart-btn');
        const favoritesBtn = document.getElementById('favorites-btn');
        const cartModal = document.getElementById('cart-modal');
        const favoritesModal = document.getElementById('favorites-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const closeFavoritesModalBtn = document.getElementById('close-favorites-modal-btn');
        const whatsappNumber = '5511942138664'; 

        // Swipers
        const bannerSwiper = new Swiper(".mySwiper", {
            pagination: { el: ".swiper-pagination", dynamicBullets: true },
            loop: true,
            autoplay: { delay: 3000, disableOnInteraction: false },
        });
        let productSwiper;

        // --- FUNÇÕES ---

        async function fetchProducts() {
            try {
                const productsCol = collection(db, 'products'); // Nome da sua coleção no Firestore
                const productSnapshot = await getDocs(productsCol);
                const productsData = productSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                return productsData;
            } catch (error) {
                console.error("Erro ao buscar produtos: ", error);
                productList.innerHTML = `<p style="color: white; text-align: center; width: 100%;">Falha ao carregar produtos. Verifique o console (F12) para mais detalhes.</p>`;
                return [];
            }
        }

        function renderProducts(products) {
            productList.innerHTML = '';
            if (!products || products.length === 0) {
                productList.innerHTML = `<p style="color: white; text-align: center; width: 100%;">Nenhum produto encontrado no banco de dados.</p>`;
                return;
            }

            products.forEach(product => {
                const isFavorite = favorites.some(fav => fav.id === product.id);
                const swiperSlide = document.createElement('div');
                swiperSlide.className = 'swiper-slide';

                swiperSlide.innerHTML = `
                    <div class="product-card">
                        <div class="product-image-wrapper">
                            <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.onerror=null;this.src='https://placehold.co/400x400/1a1a1a/ffffff?text=Imagem+Inválida';">
                            <button class="icon-btn favorite-btn ${isFavorite ? 'active' : ''}" data-product-id="${product.id}">
                                <i class="fa-${isFavorite ? 'solid' : 'regular'} fa-heart"></i>
                            </button>
                        </div>
                        <div class="product-info">
                            <h3>${product.name || 'Nome indisponível'}</h3>
                            <div class="product-rating">
                                <div class="stars">${'★'.repeat(Math.floor(product.rating || 0))}${'☆'.repeat(5 - Math.floor(product.rating || 0))}</div>
                                <span class="reviews">${product.reviews || 0} avaliações</span>
                            </div>
                            <div class="product-pricing">
                                <span class="old-price">R$ ${(product.oldPrice || 0).toFixed(2).replace('.', ',')}</span>
                                <span class="current-price">R$ ${(product.price || 0).toFixed(2).replace('.', ',')}</span>
                            </div>
                            <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
                        </div>
                    </div>
                `;
                swiperSlide.querySelector('.add-to-cart-btn').addEventListener('click', () => addToCart(product));
                swiperSlide.querySelector('.favorite-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleFavorite(product);
                });
                productList.appendChild(swiperSlide);
            });
            
            if (productSwiper) {
                productSwiper.update();
            } else {
                productSwiper = new Swiper(".product-swiper", {
                    slidesPerView: 1, spaceBetween: 10,
                    navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" },
                    breakpoints: {
                        640: { slidesPerView: 2, spaceBetween: 20 },
                        768: { slidesPerView: 3, spaceBetween: 30 },
                        1024: { slidesPerView: 4, spaceBetween: 30 },
                    },
                });
            }
        }

        function renderCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalEl = document.getElementById('cart-total');
            const cartCount = document.getElementById('cart-count');
            cartItemsContainer.innerHTML = cart.length === 0 ? '<p>Seu carrinho está vazio.</p>' : '';
            if (cart.length > 0) {
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <div class="item-details"><img src="${item.image}" alt="${item.name}"><div class="item-info"><h4>${item.name}</h4><p>R$ ${item.price.toFixed(2).replace('.', ',')}</p></div></div>
                        <div class="item-actions"><div class="quantity-control"><button class="quantity-change" data-product-id="${item.id}" data-change="-1">-</button><span>${item.quantity}</span><button class="quantity-change" data-product-id="${item.id}" data-change="1">+</button></div><button class="remove-btn remove-from-cart-btn" data-product-id="${item.id}"><i class="fa-solid fa-trash"></i></button></div>
                    `;
                    cartItemsContainer.appendChild(cartItem);
                });
            }
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotalEl.textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            cartCount.classList.toggle('hidden', totalItems === 0);
            document.querySelectorAll('.remove-from-cart-btn').forEach(btn => btn.addEventListener('click', (e) => removeFromCart(e.currentTarget.dataset.productId)));
            document.querySelectorAll('.quantity-change').forEach(btn => btn.addEventListener('click', (e) => updateQuantity(e.currentTarget.dataset.productId, parseInt(e.currentTarget.dataset.change))));
        }
        
        function renderFavorites() {
            const favoriteItemsContainer = document.getElementById('favorite-items');
            const favoritesCount = document.getElementById('favorites-count');
            favoriteItemsContainer.innerHTML = favorites.length === 0 ? '<p>Você ainda não favoritou nenhum item.</p>' : '';
            if (favorites.length > 0) {
                favorites.forEach(item => {
                    const favoriteItem = document.createElement('div');
                    favoriteItem.className = 'favorite-item';
                    favoriteItem.innerHTML = `
                        <div class="item-details"><img src="${item.image}" alt="${item.name}"><div class="item-info"><h4>${item.name}</h4><p>R$ ${item.price.toFixed(2).replace('.', ',')}</p></div></div>
                        <div class="item-actions"><button class="add-fav-to-cart-btn" data-product-id="${item.id}"><i class="fa-solid fa-cart-plus"></i></button><button class="remove-btn remove-from-favorites-btn" data-product-id="${item.id}"><i class="fa-solid fa-trash"></i></button></div>
                    `;
                    favoriteItemsContainer.appendChild(favoriteItem);
                });
            }
            favoritesCount.textContent = favorites.length;
            favoritesCount.classList.toggle('hidden', favorites.length === 0);
            document.querySelectorAll('.remove-from-favorites-btn').forEach(btn => btn.addEventListener('click', (e) => {
                const product = allProducts.find(p => p.id === e.currentTarget.dataset.productId);
                toggleFavorite(product);
            }));
            document.querySelectorAll('.add-fav-to-cart-btn').forEach(btn => btn.addEventListener('click', (e) => {
                const product = allProducts.find(p => p.id === e.currentTarget.dataset.productId);
                addToCart(product);
                toggleModal(favoritesModal, false);
                toggleModal(cartModal, true);
            }));
        }

        function addToCart(product) { const existingItem = cart.find(item => item.id === product.id); if (existingItem) { existingItem.quantity++; } else { cart.push({ ...product, quantity: 1 }); } renderCart(); }
        function removeFromCart(productId) { cart = cart.filter(item => item.id !== productId); renderCart(); }
        function updateQuantity(productId, change) { const item = cart.find(item => item.id === productId); if (item) { item.quantity += change; if (item.quantity <= 0) { removeFromCart(productId); } else { renderCart(); } } }
        function toggleFavorite(product) { const existingIndex = favorites.findIndex(item => item.id === product.id); if (existingIndex > -1) { favorites.splice(existingIndex, 1); } else { favorites.push(product); } renderProducts(allProducts); renderFavorites(); }
        function toggleModal(modal, show) { modal.classList.toggle('visible', show); }

        // --- EVENT LISTENERS ---
        cartBtn.addEventListener('click', () => { renderCart(); toggleModal(cartModal, true); });
        favoritesBtn.addEventListener('click', () => { renderFavorites(); toggleModal(favoritesModal, true); });
        closeModalBtn.addEventListener('click', () => toggleModal(cartModal, false));
        closeFavoritesModalBtn.addEventListener('click', () => toggleModal(favoritesModal, false));
        cartModal.addEventListener('click', (e) => { if (e.target === cartModal) toggleModal(cartModal, false); });
        favoritesModal.addEventListener('click', (e) => { if (e.target === favoritesModal) toggleModal(favoritesModal, false); });
        
        document.getElementById('checkout-btn').addEventListener('click', () => {
            if (cart.length === 0) { console.log('Carrinho vazio!'); return; }
            let message = 'Olá! Gostaria de fazer um pedido com os seguintes itens:\n\n';
            let total = 0;
            cart.forEach(item => { message += `*${item.name}* (${item.quantity}x) - R$ ${(item.price * item.quantity).toFixed(2).replace('.', ',')}\n`; total += item.price * item.quantity; });
            message += `\n*Total do Pedido: R$ ${total.toFixed(2).replace('.', ',')}*`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://api.whatsapp.com/send?phone=${whatsappNumber}&text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        });

        // --- INICIALIZAÇÃO ---
        async function init() {
            allProducts = await fetchProducts();
            renderProducts(allProducts);
        }

        init();
    </script>
</body>
</html>
